{"title":"Fixed inner distance","uid":"4909e6c65bbb40816d77d5c41608779a","slug":"Fixed inner distance","date":"2023-07-29T10:00:19.249Z","updated":"2023-07-29T10:00:19.364Z","comments":true,"path":"api/articles/Fixed inner distance.json","keywords":"Digital Garden","cover":[],"content":"<p>&#x2F;*<br><img src=\"https://raw.githubusercontent.com/zsviczian/obsidian-excalidraw-plugin/master/images/scripts-download-raw.jpg\"></p>\n<p>Download this file and save to your Obsidian Vault including the first line, or open it in “Raw” and copy the entire contents to Obsidian.</p>\n<p><img src=\"https://raw.githubusercontent.com/zsviczian/obsidian-excalidraw-plugin/master/images/scripts-fixed-inner-distance.png\"></p>\n<p>This script arranges selected elements and groups with a fixed inner distance.</p>\n<p>Tips: You can use the <code>Box Selected Elements</code> and <code>Dimensions</code> scripts to create rectangles of the desired size, then use the <code>Change shape of selected elements</code> script to convert the rectangles to ellipses, and then use the <code>Fixed inner distance</code> script regains a desired inner distance.</p>\n<p>Inspiration: #394</p>\n<p>See documentation for more details:<br><a href=\"https://zsviczian.github.io/obsidian-excalidraw-plugin/ExcalidrawScriptsEngine.html\">https://zsviczian.github.io/obsidian-excalidraw-plugin/ExcalidrawScriptsEngine.html</a></p>\n<pre><code class=\"javascript\">*/\nif(!ea.verifyMinimumPluginVersion || !ea.verifyMinimumPluginVersion(&quot;1.5.21&quot;)) &#123;\n  new Notice(&quot;This script requires a newer version of Excalidraw. Please install the latest version.&quot;);\n  return;\n&#125;\nsettings = ea.getScriptSettings();\n//set default values on first run\nif(!settings[&quot;Default distance&quot;]) &#123;\n    settings = &#123;\n      &quot;Prompt for distance?&quot;: true,\n      &quot;Default distance&quot; : &#123;\n        value: 10,\n        description: &quot;Fixed horizontal distance between centers&quot;\n      &#125;,\n      &quot;Remember last distance?&quot;: false\n    &#125;;\n    ea.setScriptSettings(settings);\n&#125;\n\nlet distanceStr = settings[&quot;Default distance&quot;].value.toString();\nconst rememberLastDistance = settings[&quot;Remember last distance?&quot;];\n\nif(settings[&quot;Prompt for distance?&quot;]) &#123;\n    distanceStr = await utils.inputPrompt(&quot;distance?&quot;,&quot;number&quot;,distanceStr);\n&#125;\n\nconst borders = [&quot;top&quot;, &quot;bottom&quot;, &quot;left&quot;, &quot;right&quot;];\nconst fromBorder = await utils.suggester(borders, borders, &quot;from border?&quot;);\n\nif(!fromBorder) &#123;\n  return;\n&#125;\n\nconst distance = parseInt(distanceStr);\nif(isNaN(distance)) &#123;\n  return;\n&#125;\nif(rememberLastDistance) &#123;\n    settings[&quot;Default distance&quot;].value = distance;\n    ea.setScriptSettings(settings);\n&#125;\nconst elements=ea.getViewSelectedElements();\nconst topGroups = ea.getMaximumGroups(elements)\n    .filter(els =&gt; !(els.length === 1 &amp;&amp; els[0].type ===&quot;arrow&quot;)) // ignore individual arrows\n    .filter(els =&gt; !(els.length === 1 &amp;&amp; (els[0].containerId))); // ignore text in stickynote\n\nif(topGroups.length &lt;= 1) &#123;\n  new Notice(&quot;At least 2 or more elements or groups should be selected.&quot;);\n  return;\n&#125;\n\nif(fromBorder === &#39;top&#39;) &#123;\n  const groups = topGroups.sort((lha,rha) =&gt; Math.min(...lha.map(t =&gt; t.y)) - Math.min(...rha.map(t =&gt; t.y)));\n  const firstGroupTop = Math.min(...groups[0].map(el =&gt; el.y));\n  \n  for(var i=0; i&lt;groups.length; i++) &#123;\n    if(i &gt; 0) &#123;\n        const curGroup = groups[i];\n        const moveDistance = distance * i;\n        for(const curEl of curGroup) &#123;\n          curEl.y = firstGroupTop + moveDistance;\n        &#125;\n    &#125;\n  &#125;   \n&#125;\nelse if(fromBorder === &#39;bottom&#39;) &#123;\n  const groups = topGroups.sort((lha,rha) =&gt; Math.min(...lha.map(t =&gt; t.y + t.height)) - Math.min(...rha.map(t =&gt; t.y + t.height))).reverse();\n  const firstGroupBottom = Math.max(...groups[0].map(el =&gt; el.y + el.height));\n  \n  for(var i=0; i&lt;groups.length; i++) &#123;\n    if(i &gt; 0) &#123;\n        const curGroup = groups[i];\n        const moveDistance = distance * i;\n        for(const curEl of curGroup) &#123;\n           curEl.y = firstGroupBottom - moveDistance - curEl.height;\n        &#125;\n    &#125;\n  &#125;   \n&#125;\nelse if(fromBorder === &#39;left&#39;) &#123;\n  const groups = topGroups.sort((lha,rha) =&gt; Math.min(...lha.map(t =&gt; t.x)) - Math.min(...rha.map(t =&gt; t.x)));\n  const firstGroupLeft = Math.min(...groups[0].map(el =&gt; el.x));\n  \n  for(var i=0; i&lt;groups.length; i++) &#123;\n    if(i &gt; 0) &#123;\n        const curGroup = groups[i];\n        const moveDistance = distance * i;\n        for(const curEl of curGroup) &#123;\n          curEl.x = firstGroupLeft + moveDistance;\n        &#125;\n    &#125;\n  &#125;   \n&#125;\nelse if(fromBorder === &#39;right&#39;) &#123;\n  const groups = topGroups.sort((lha,rha) =&gt; Math.min(...lha.map(t =&gt; t.x + t.width)) - Math.min(...rha.map(t =&gt; t.x + t.width))).reverse();\n  const firstGroupRight = Math.max(...groups[0].map(el =&gt; el.x + el.width));\n  \n  for(var i=0; i&lt;groups.length; i++) &#123;\n    if(i &gt; 0) &#123;\n        const curGroup = groups[i];\n        const moveDistance = distance * i;\n        for(const curEl of curGroup) &#123;\n           curEl.x = firstGroupRight - moveDistance - curEl.width;\n        &#125;\n    &#125;\n  &#125;   \n&#125;\n\nea.copyViewElementsToEAforEditing(elements);\nawait ea.addElementsToView(false, false);\n</code></pre>\n","text":"&#x2F;* Download this file and save to your Obsidian Vault including the first line, or open it in “Raw” and copy the entire contents to Obs...","link":"","photos":[],"count_time":{"symbolsCount":"4.8k","symbolsTime":"4 mins."},"categories":[],"tags":[],"toc":"","author":{"name":"Devmacy","slug":"blog-author","avatar":"https://s1.ax1x.com/2023/01/24/pSYhwB4.jpg","link":"/","description":"数字花园","socials":{"github":"https://github.com/Devmacy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Fixed spacing","uid":"567ae1c3b3ca221e66b212e6a524e8af","slug":"Fixed spacing","date":"2023-07-29T10:00:19.251Z","updated":"2023-07-29T10:00:19.365Z","comments":true,"path":"api/articles/Fixed spacing.json","keywords":"Digital Garden","cover":[],"text":"&#x2F;* Download this file and save to your Obsidian Vault including the first line, or open it in “Raw” and copy the entire contents to Obs...","link":"","photos":[],"count_time":{"symbolsCount":"2.6k","symbolsTime":"2 mins."},"categories":[],"tags":[],"author":{"name":"Devmacy","slug":"blog-author","avatar":"https://s1.ax1x.com/2023/01/24/pSYhwB4.jpg","link":"/","description":"数字花园","socials":{"github":"https://github.com/Devmacy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Fixed horizontal distance between centers","uid":"c07aef96b0da563fb4e8cd01e51ff50c","slug":"Fixed horizontal distance between centers","date":"2023-07-29T10:00:19.247Z","updated":"2023-07-29T10:00:19.363Z","comments":true,"path":"api/articles/Fixed horizontal distance between centers.json","keywords":"Digital Garden","cover":[],"text":"&#x2F;* Download this file and save to your Obsidian Vault including the first line, or open it in “Raw” and copy the entire contents to Obs...","link":"","photos":[],"count_time":{"symbolsCount":"2.8k","symbolsTime":"3 mins."},"categories":[],"tags":[],"author":{"name":"Devmacy","slug":"blog-author","avatar":"https://s1.ax1x.com/2023/01/24/pSYhwB4.jpg","link":"/","description":"数字花园","socials":{"github":"https://github.com/Devmacy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}