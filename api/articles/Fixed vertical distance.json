{"title":"Fixed vertical distance","uid":"0258d5b0ed5cc2cef372602c3d6c3aa4","slug":"Fixed vertical distance","date":"2023-07-29T10:00:19.257Z","updated":"2023-07-29T10:00:19.367Z","comments":true,"path":"api/articles/Fixed vertical distance.json","keywords":"Digital Garden","cover":[],"content":"<p>&#x2F;*<br><img src=\"https://raw.githubusercontent.com/zsviczian/obsidian-excalidraw-plugin/master/images/scripts-download-raw.jpg\"></p>\n<p>Download this file and save to your Obsidian Vault including the first line, or open it in “Raw” and copy the entire contents to Obsidian.</p>\n<p><img src=\"https://raw.githubusercontent.com/zsviczian/obsidian-excalidraw-plugin/master/images/scripts-fixed-vertical-distance.png\"></p>\n<p>The script arranges the selected elements vertically with a fixed spacing.</p>\n<p>When we create an architecture diagram or mind map, we often need to arrange a large number of elements in a fixed spacing. <code>Fixed spacing</code> and <code>Fixed vertical Distance</code> scripts can save us a lot of time.</p>\n<pre><code class=\"javascript\">*/\nif(!ea.verifyMinimumPluginVersion || !ea.verifyMinimumPluginVersion(&quot;1.5.21&quot;)) &#123;\n  new Notice(&quot;This script requires a newer version of Excalidraw. Please install the latest version.&quot;);\n  return;\n&#125;\nsettings = ea.getScriptSettings();\n//set default values on first run\nif(!settings[&quot;Default spacing&quot;]) &#123;\n    settings = &#123;\n      &quot;Prompt for spacing?&quot;: true,\n      &quot;Default spacing&quot; : &#123;\n        value: 10,\n        description: &quot;Fixed vertical spacing between elements&quot;\n      &#125;,\n      &quot;Remember last spacing?&quot;: false\n    &#125;;\n    ea.setScriptSettings(settings);\n&#125;\n\nlet spacingStr = settings[&quot;Default spacing&quot;].value.toString();\nconst rememberLastSpacing = settings[&quot;Remember last spacing?&quot;];\n\nif(settings[&quot;Prompt for spacing?&quot;]) &#123;\n    spacingStr = await utils.inputPrompt(&quot;spacing?&quot;,&quot;number&quot;,spacingStr);\n&#125;\n\nconst spacing = parseInt(spacingStr);\nif(isNaN(spacing)) &#123;\n  return;\n&#125;\nif(rememberLastSpacing) &#123;\n    settings[&quot;Default spacing&quot;].value = spacing;\n    ea.setScriptSettings(settings);\n&#125;\nconst elements=ea.getViewSelectedElements(); \nconst topGroups = ea.getMaximumGroups(elements)\n    .filter(els =&gt; !(els.length === 1 &amp;&amp; els[0].type ===&quot;arrow&quot;)) // ignore individual arrows\n    .filter(els =&gt; !(els.length === 1 &amp;&amp; (els[0].containerId))); // ignore text in stickynote\n    \nconst groups = topGroups.sort((lha,rha) =&gt; lha[0].y - rha[0].y);\n\nfor(var i=0; i&lt;groups.length; i++) &#123;\n    if(i &gt; 0) &#123;\n        const preGroup = groups[i-1];\n        const curGroup = groups[i];\n\n        const preBottom = Math.max(...preGroup.map(el =&gt; el.y + el.height));\n        const curTop = Math.min(...curGroup.map(el =&gt; el.y));\n        const distance = curTop -  preBottom - spacing;\n\n        for(const curEl of curGroup) &#123;\n            curEl.y = curEl.y - distance;\n        &#125;\n    &#125;\n&#125;\nea.copyViewElementsToEAforEditing(elements);\nawait ea.addElementsToView(false, false);\n</code></pre>\n","text":"&#x2F;* Download this file and save to your Obsidian Vault including the first line, or open it in “Raw” and copy the entire contents to Obs...","link":"","photos":[],"count_time":{"symbolsCount":"2.6k","symbolsTime":"2 mins."},"categories":[],"tags":[],"toc":"","author":{"name":"Devmacy","slug":"blog-author","avatar":"https://s1.ax1x.com/2023/01/24/pSYhwB4.jpg","link":"/","description":"数字花园","socials":{"github":"https://github.com/Devmacy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Folder Note Core - Make Current Drawing a Folder","uid":"93f25646f3e0482094b2f4de6d2309a0","slug":"Folder Note Core - Make Current Drawing a Folder","date":"2023-07-29T10:00:19.260Z","updated":"2023-07-29T10:00:19.368Z","comments":true,"path":"api/articles/Folder Note Core - Make Current Drawing a Folder.json","keywords":"Digital Garden","cover":null,"text":"&#x2F;*This script adds the Folder Note Core: Make current document folder note function to Excalidraw drawings. Running this script will co...","link":"","photos":[],"count_time":{"symbolsCount":697,"symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"Devmacy","slug":"blog-author","avatar":"https://s1.ax1x.com/2023/01/24/pSYhwB4.jpg","link":"/","description":"数字花园","socials":{"github":"https://github.com/Devmacy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Fixed vertical distance between centers","uid":"d160413eb0d290aa3759d43b095a5f21","slug":"Fixed vertical distance between centers","date":"2023-07-29T10:00:19.254Z","updated":"2023-07-29T10:00:19.366Z","comments":true,"path":"api/articles/Fixed vertical distance between centers.json","keywords":"Digital Garden","cover":[],"text":"&#x2F;* Download this file and save to your Obsidian Vault including the first line, or open it in “Raw” and copy the entire contents to Obs...","link":"","photos":[],"count_time":{"symbolsCount":"2.8k","symbolsTime":"3 mins."},"categories":[],"tags":[],"author":{"name":"Devmacy","slug":"blog-author","avatar":"https://s1.ax1x.com/2023/01/24/pSYhwB4.jpg","link":"/","description":"数字花园","socials":{"github":"https://github.com/Devmacy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}