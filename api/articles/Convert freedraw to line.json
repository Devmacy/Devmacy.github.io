{"title":"Convert freedraw to line","uid":"43401c5ad187ee18ee7b052dbabdf338","slug":"Convert freedraw to line","date":"2023-07-29T10:00:19.215Z","updated":"2023-07-29T10:00:19.343Z","comments":true,"path":"api/articles/Convert freedraw to line.json","keywords":"Digital Garden","cover":[],"content":"<p>&#x2F;*<br><img src=\"https://raw.githubusercontent.com/zsviczian/obsidian-excalidraw-plugin/master/images/scripts-convert-freedraw-to-line.jpg\"></p>\n<p>Convert selected freedraw objects into editable lines. This will allow you to adjust your drawings by dragging line points and will also allow you to select shape fill in case of enclosed lines. You can adjust conversion point density in settings.</p>\n<pre><code class=\"javascript\">*/\n\nif(!ea.verifyMinimumPluginVersion || !ea.verifyMinimumPluginVersion(&quot;1.5.21&quot;)) &#123;\n  new Notice(&quot;This script requires a newer version of Excalidraw. Please install the latest version.&quot;);\n  return;\n&#125;\n\nsettings = ea.getScriptSettings();\n//set default values on first run\nif(!settings[&quot;Point density&quot;]) &#123;\n  settings = &#123;\n    &quot;Point density&quot; : &#123;\n      value: &quot;7:1&quot;,\n      valueset: [&quot;1:1&quot;,&quot;2:1&quot;,&quot;3:1&quot;,&quot;4:1&quot;,&quot;5:1&quot;,&quot;6:1&quot;,&quot;7:1&quot;,&quot;8:1&quot;,&quot;9:1&quot;,&quot;10:1&quot;,&quot;11:1&quot;],\n      description: &quot;A freedraw object has many points. Converting freedraw to a line with too many points will result in an impractical object that is hard to edit. This setting sepcifies how many points from freedraw should be averaged to form a point on the line&quot;\n    &#125;,\n  &#125;;\n  ea.setScriptSettings(settings);\n&#125;\n\nconst scale = settings[&quot;Point density&quot;].value;\nconst setSize = parseInt(scale.substring(0,scale.indexOf(&quot;:&quot;)));\n\nconst elements = ea.getViewSelectedElements().filter(el=&gt;el.type===&quot;freedraw&quot;);\nif(elements.length === 0) &#123;\n    new Notice(&quot;No freedraw object is selected&quot;);\n&#125;\n\n\nea.style.roughness=0;\nea.style.strokeSharpness=&quot;round&quot;;\n\nelements.forEach((el)=&gt;&#123;\n    points = [];\n  points.push(el.points[0]);\n  for(i=1;i&lt;el.points.length;i+=setSize) &#123;\n        point = [0,0];\n    count = 0;\n    for(p of el.points.slice(i,i+setSize)) &#123;\n            point = [ point[0]+p[0] , point[1]+p[1] ];\n            count++;\n        &#125;\n        point = [point[0]/count,point[1]/count];\n      points.push(point);\n    &#125;\n    const lineId = ea.addLine(points);\n  const line = ea.getElement(lineId);\n  line.strokeWidth = el.strokeWidth*3;\n  line.strokeColor = el.strokeColor;\n  line.width = el.width;\n  line.height = el.height;\n  line.x = el.x;\n  line.y = el.y;\n&#125;);\n\nea.deleteViewElements(elements);\nawait ea.addElementsToView(false,false,true);\nea.selectElementsInView(ea.getElements());\n</code></pre>\n","text":"&#x2F;* Convert selected freedraw objects into editable lines. This will allow you to adjust your drawings by dragging line points and will ...","link":"","photos":[],"count_time":{"symbolsCount":"2.4k","symbolsTime":"2 mins."},"categories":[],"tags":[],"toc":"","author":{"name":"Devmacy","slug":"blog-author","avatar":"https://s1.ax1x.com/2023/01/24/pSYhwB4.jpg","link":"/","description":"数字花园","socials":{"github":"https://github.com/Devmacy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Convert selected text elements to sticky notes","uid":"c2aba0c87b302b6184b94af8b9a48a21","slug":"Convert selected text elements to sticky notes","date":"2023-07-29T10:00:19.217Z","updated":"2023-07-29T10:00:19.344Z","comments":true,"path":"api/articles/Convert selected text elements to sticky notes.json","keywords":"Digital Garden","cover":[],"text":"&#x2F;* Converts selected plain text elements to sticky notes with transparent background and transparent stroke color. Essentially converts...","link":"","photos":[],"count_time":{"symbolsCount":"3k","symbolsTime":"3 mins."},"categories":[],"tags":[],"author":{"name":"Devmacy","slug":"blog-author","avatar":"https://s1.ax1x.com/2023/01/24/pSYhwB4.jpg","link":"/","description":"数字花园","socials":{"github":"https://github.com/Devmacy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Connect elements","uid":"69efa56c4e6a0d938e2d0b8bdc0d033b","slug":"Connect elements","date":"2023-07-29T10:00:19.213Z","updated":"2023-07-29T10:00:19.342Z","comments":true,"path":"api/articles/Connect elements.json","keywords":"Digital Garden","cover":[],"text":"&#x2F;* This script will connect two objects with an arrow. If either of the objects are a set of grouped elements (e.g. a text element grou...","link":"","photos":[],"count_time":{"symbolsCount":"2.9k","symbolsTime":"3 mins."},"categories":[],"tags":[],"author":{"name":"Devmacy","slug":"blog-author","avatar":"https://s1.ax1x.com/2023/01/24/pSYhwB4.jpg","link":"/","description":"数字花园","socials":{"github":"https://github.com/Devmacy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}