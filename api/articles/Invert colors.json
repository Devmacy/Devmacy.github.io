{"title":"Invert colors","uid":"516fdfc977076be85ee0c36a27a100d1","slug":"Invert colors","date":"2023-07-29T10:00:19.266Z","updated":"2023-07-29T10:00:19.380Z","comments":true,"path":"api/articles/Invert colors.json","keywords":"Digital Garden","cover":[],"content":"<p>&#x2F;*<br><img src=\"https://raw.githubusercontent.com/zsviczian/obsidian-excalidraw-plugin/master/images/scripts-invert-colors.jpg\"></p>\n<p>The script inverts the colors on the canvas including the color palette in Element Properties.</p>\n<pre><code class=\"javascript\">*/\nconst defaultColorPalette = &#123; // https://github.com/zsviczian/obsidian-excalidraw-plugin/releases/tag/1.6.8\n  elementStroke:[&quot;#000000&quot;,&quot;#343a40&quot;,&quot;#495057&quot;,&quot;#c92a2a&quot;,&quot;#a61e4d&quot;,&quot;#862e9c&quot;,&quot;#5f3dc4&quot;,&quot;#364fc7&quot;,&quot;#1864ab&quot;,&quot;#0b7285&quot;,&quot;#087f5b&quot;,&quot;#2b8a3e&quot;,&quot;#5c940d&quot;,&quot;#e67700&quot;,&quot;#d9480f&quot;],\n  elementBackground:[&quot;transparent&quot;,&quot;#ced4da&quot;,&quot;#868e96&quot;,&quot;#fa5252&quot;,&quot;#e64980&quot;,&quot;#be4bdb&quot;,&quot;#7950f2&quot;,&quot;#4c6ef5&quot;,&quot;#228be6&quot;,&quot;#15aabf&quot;,&quot;#12b886&quot;,&quot;#40c057&quot;,&quot;#82c91e&quot;,&quot;#fab005&quot;,&quot;#fd7e14&quot;],\n  canvasBackground:[&quot;#ffffff&quot;,&quot;#f8f9fa&quot;,&quot;#f1f3f5&quot;,&quot;#fff5f5&quot;,&quot;#fff0f6&quot;,&quot;#f8f0fc&quot;,&quot;#f3f0ff&quot;,&quot;#edf2ff&quot;,&quot;#e7f5ff&quot;,&quot;#e3fafc&quot;,&quot;#e6fcf5&quot;,&quot;#ebfbee&quot;,&quot;#f4fce3&quot;,&quot;#fff9db&quot;,&quot;#fff4e6&quot;]\n&#125;;\n\nconst api = ea.getExcalidrawAPI();\nconst st = api.getAppState();\n\nlet colorPalette = st.colorPalette ?? defaultColorPalette;\nif (Object.entries(colorPalette).length === 0) colorPalette = defaultColorPalette;\nif(!colorPalette.elementStroke || Object.entries(colorPalette.elementStroke).length === 0) colorPalette.elementStroke = defaultColorPalette.elementStroke;\nif(!colorPalette.elementBackground || Object.entries(colorPalette.elementBackground).length === 0) colorPalette.elementBackground = defaultColorPalette.elementBackground;\nif(!colorPalette.canvasBackground || Object.entries(colorPalette.canvasBackground).length === 0) colorPalette.canvasBackground = defaultColorPalette.canvasBackground;\n\nconst invertColor = (color) =&gt; &#123;\n    if(color.toLowerCase()===&quot;transparent&quot;) return color;\n    const cm = ea.getCM(color);\n    const lightness = cm.lightness;\n    cm.lightnessTo(Math.abs(lightness-100));\n    switch (cm.format) &#123;\n        case &quot;hsl&quot;: return cm.stringHSL();\n        case &quot;rgb&quot;: return cm.stringRGB();\n        case &quot;hsv&quot;: return cm.stringHSV();\n        default: return cm.stringHEX(&#123;alpha: false&#125;);\n    &#125;\n&#125;\n\nconst invertPaletteColors = (palette) =&gt; Object.keys(palette).forEach(key =&gt; palette[key] = invertColor(palette[key]));\nObject.keys(colorPalette).forEach(key =&gt; invertPaletteColors(colorPalette[key]));\n\nea.copyViewElementsToEAforEditing(ea.getViewElements());\nea.getElements().forEach(el=&gt;&#123;\n    el.strokeColor = invertColor(el.strokeColor);\n    el.backgroundColor = invertColor(el.backgroundColor);\n&#125;);\n\nea.viewUpdateScene(&#123;\n  appState:&#123;\n      colorPalette,\n      viewBackgroundColor: invertColor(st.viewBackgroundColor),\n      currentItemStrokeColor: invertColor(st.currentItemStrokeColor),\n      currentItemBackgroundColor: invertColor(st.currentItemBackgroundColor)\n  &#125;,\n  elements: ea.getElements()\n&#125;);\n</code></pre>\n","text":"&#x2F;* The script inverts the colors on the canvas including the color palette in Element Properties. */ const defaultColorPalette = &#123;...","link":"","photos":[],"count_time":{"symbolsCount":"3.1k","symbolsTime":"3 mins."},"categories":[],"tags":[],"toc":"","author":{"name":"Devmacy","slug":"blog-author","avatar":"https://s1.ax1x.com/2023/01/24/pSYhwB4.jpg","link":"/","description":"数字花园","socials":{"github":"https://github.com/Devmacy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Lighten background color","uid":"61e0f09d98ca2d807aab8a4dcb946f8a","slug":"Lighten background color","date":"2023-07-29T10:00:19.268Z","updated":"2023-07-29T10:00:19.383Z","comments":true,"path":"api/articles/Lighten background color.json","keywords":"Digital Garden","cover":[],"text":"&#x2F;* Download this file and save to your Obsidian Vault including the first line, or open it in “Raw” and copy the entire contents to Obs...","link":"","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[],"tags":[],"author":{"name":"Devmacy","slug":"blog-author","avatar":"https://s1.ax1x.com/2023/01/24/pSYhwB4.jpg","link":"/","description":"数字花园","socials":{"github":"https://github.com/Devmacy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Hardware Eraser Support","uid":"4c444fb32f94eb6704b12be2b19ebd15","slug":"Hardware Eraser Support","date":"2023-07-29T10:00:19.264Z","updated":"2023-07-29T10:00:19.376Z","comments":true,"path":"api/articles/Hardware Eraser Support.json","keywords":"Digital Garden","cover":null,"text":"&#x2F;*Adds support for pen inversion, a.k.a. the hardware eraser on the back of your pen. Simply use the eraser on a supported pen, and it ...","link":"","photos":[],"count_time":{"symbolsCount":"2.9k","symbolsTime":"3 mins."},"categories":[],"tags":[{"name":"L2945","slug":"L2945","count":1,"path":"api/tags/L2945.json"}],"author":{"name":"Devmacy","slug":"blog-author","avatar":"https://s1.ax1x.com/2023/01/24/pSYhwB4.jpg","link":"/","description":"数字花园","socials":{"github":"https://github.com/Devmacy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}