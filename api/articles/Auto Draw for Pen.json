{"title":"Auto Draw for Pen","uid":"e4d1ac459887c21249603be66b9f7f5b","slug":"Auto Draw for Pen","date":"2023-07-29T10:00:19.203Z","updated":"2023-07-29T10:00:19.335Z","comments":true,"path":"api/articles/Auto Draw for Pen.json","keywords":"Digital Garden","cover":null,"content":"<p>&#x2F;*<br>Automatically switches between the select and draw tools, based on whether a pen is being used.</p>\n<ol>\n<li>Choose the select tool</li>\n<li>Hover&#x2F;use the pen to draw, move it away to return to select mode<br><em>This is based on pen hover status, so will only work if your pen supports hover!</em><br>If you click draw with the mouse or press select with the pen, switching will be disabled until the opposite input method is used.</li>\n</ol>\n<p><strong>Note:</strong> This script will stay active until the <em>Obsidian</em> window is closed.</p>\n<p>Compatible with my <em>Hardware Eraser Support</em> script</p>\n<pre><code class=\"javascript\">*/\n(function() &#123;\n    &#39;use strict&#39;;\n    \n    let promise\n    let timeout\n    let disable\n\n    function handlePointer(e) &#123;\n        ea.setView(&quot;active&quot;);\n        var activeTool = ea.getExcalidrawAPI().getAppState().activeTool;\n        function setActiveTool(t) &#123;\n            ea.getExcalidrawAPI().setActiveTool(t)\n        &#125;\n\n        if (e.pointerType === &#39;pen&#39;) &#123;\n            if (disable) return\n            if (!promise &amp;&amp; activeTool.type===&#39;selection&#39;) &#123;\n                setActiveTool(&#123;type:&quot;freedraw&quot;&#125;)\n            &#125;\n\n            if (timeout) clearTimeout(timeout)\n\n            function setTimeoutX(a,b) &#123;\n                timeout = setTimeout(a,b)\n                return timeout\n            &#125;\n    \n            function revert() &#123;\n                activeTool = ea.getExcalidrawAPI().getAppState().activeTool;\n                disable = false\n                if (activeTool.type===&#39;freedraw&#39;) &#123;\n                    setActiveTool(&#123;type:&quot;selection&quot;&#125;)\n                &#125; else if (activeTool.type===&#39;selection&#39;) &#123;\n                    disable = true\n                &#125;\n                promise = false\n            &#125;\n\n            promise = new Promise(resolve =&gt; setTimeoutX(resolve, 500))\n            promise.then(() =&gt; revert())\n        &#125;\n    &#125;\n    function handleClick(e) &#123;\n        ea.setView(&quot;active&quot;);\n        if (e.pointerType !== &#39;pen&#39;) &#123;\n            disable = false\n        &#125;\n    &#125;\n\n    window.addEventListener(&#39;pointermove&#39;, handlePointer, &#123; capture: true &#125;)\n    window.addEventListener(&#39;pointerdown&#39;, handleClick, &#123; capture: true &#125;)\n\n&#125;)();\n</code></pre>\n","text":"&#x2F;*Automatically switches between the select and draw tools, based on whether a pen is being used. Choose the select tool Hover&#x2F;use...","link":"","photos":[],"count_time":{"symbolsCount":"2.3k","symbolsTime":"2 mins."},"categories":[],"tags":[],"toc":"","author":{"name":"Devmacy","slug":"blog-author","avatar":"https://s1.ax1x.com/2023/01/24/pSYhwB4.jpg","link":"/","description":"数字花园","socials":{"github":"https://github.com/Devmacy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Auto Layout","uid":"93126ca1dba62bd049917d90fc642684","slug":"Auto Layout","date":"2023-07-29T10:00:19.205Z","updated":"2023-07-29T10:00:19.335Z","comments":true,"path":"api/articles/Auto Layout.json","keywords":"Digital Garden","cover":[],"text":"&#x2F;* Download this file and save to your Obsidian Vault including the first line, or open it in “Raw” and copy the entire contents to Obs...","link":"","photos":[],"count_time":{"symbolsCount":"14k","symbolsTime":"12 mins."},"categories":[],"tags":[],"author":{"name":"Devmacy","slug":"blog-author","avatar":"https://s1.ax1x.com/2023/01/24/pSYhwB4.jpg","link":"/","description":"数字花园","socials":{"github":"https://github.com/Devmacy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Add Next Step in Process","uid":"596ec896ae628dddf8ba2d8237bc03cd","slug":"Add Next Step in Process","date":"2023-07-29T10:00:19.201Z","updated":"2023-07-29T10:00:19.334Z","comments":true,"path":"api/articles/Add Next Step in Process.json","keywords":"Digital Garden","cover":[],"text":"&#x2F;* This script will prompt you for the title of the process step, then will create a stick note with the text. If an element is selecte...","link":"","photos":[],"count_time":{"symbolsCount":"5.2k","symbolsTime":"5 mins."},"categories":[],"tags":[],"author":{"name":"Devmacy","slug":"blog-author","avatar":"https://s1.ax1x.com/2023/01/24/pSYhwB4.jpg","link":"/","description":"数字花园","socials":{"github":"https://github.com/Devmacy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}