{"title":"Connect elements","uid":"69efa56c4e6a0d938e2d0b8bdc0d033b","slug":"Connect elements","date":"2023-07-29T10:00:19.213Z","updated":"2023-07-29T10:00:19.342Z","comments":true,"path":"api/articles/Connect elements.json","keywords":"Digital Garden","cover":[],"content":"<p>&#x2F;*<br><img src=\"https://raw.githubusercontent.com/zsviczian/obsidian-excalidraw-plugin/master/images/scripts-connect-elements.jpg\"></p>\n<p>This script will connect two objects with an arrow. If either of the objects are a set of grouped elements (e.g. a text element grouped with an encapsulating rectangle), the script will identify these groups, and connect the arrow to the largest object in the group (assuming you want to connect the arrow to the box around the text element).</p>\n<p>See documentation for more details:<br><a href=\"https://zsviczian.github.io/obsidian-excalidraw-plugin/ExcalidrawScriptsEngine.html\">https://zsviczian.github.io/obsidian-excalidraw-plugin/ExcalidrawScriptsEngine.html</a></p>\n<pre><code class=\"javascript\">*/\nif(!ea.verifyMinimumPluginVersion || !ea.verifyMinimumPluginVersion(&quot;1.5.21&quot;)) &#123;\n  new Notice(&quot;This script requires a newer version of Excalidraw. Please install the latest version.&quot;);\n  return;\n&#125;\n\nsettings = ea.getScriptSettings();\n//set default values on first run\nif(!settings[&quot;Starting arrowhead&quot;]) &#123;\n    settings = &#123;\n      &quot;Starting arrowhead&quot; : &#123;\n            value: &quot;none&quot;,\n      valueset: [&quot;none&quot;,&quot;arrow&quot;,&quot;triangle&quot;,&quot;bar&quot;,&quot;dot&quot;]\n        &#125;,\n        &quot;Ending arrowhead&quot; : &#123;\n            value: &quot;triangle&quot;,\n      valueset: [&quot;none&quot;,&quot;arrow&quot;,&quot;triangle&quot;,&quot;bar&quot;,&quot;dot&quot;]\n        &#125;,\n        &quot;Line points&quot; : &#123;\n            value: 1,\n      description: &quot;Number of line points between start and end&quot;\n        &#125;\n    &#125;;\n    ea.setScriptSettings(settings);\n&#125;\n\nconst arrowStart = settings[&quot;Starting arrowhead&quot;].value === &quot;none&quot; ? null : settings[&quot;Starting arrowhead&quot;].value;\nconst arrowEnd = settings[&quot;Ending arrowhead&quot;].value === &quot;none&quot; ? null : settings[&quot;Ending arrowhead&quot;].value;\nconst linePoints = Math.floor(settings[&quot;Line points&quot;].value);\n\n\n\nconst elements = ea.getViewSelectedElements();\nea.copyViewElementsToEAforEditing(elements);\ngroups = ea.getMaximumGroups(elements);\nif(groups.length !== 2) &#123;\n  //unfortunately getMaxGroups returns duplicated resultset for sticky notes\n  //needs additional filtering\n  cleanGroups=[];\n  idList = [];\n  for (group of groups) &#123;\n    keep = true;\n    for(item of group) if(idList.contains(item.id)) keep = false;\n    if(keep) &#123;\n      cleanGroups.push(group);\n      idList = idList.concat(group.map(el=&gt;el.id))\n    &#125;\n  &#125;\n  if(cleanGroups.length !== 2) return;\n  groups = cleanGroups;\n&#125;\nels = [ \n  ea.getLargestElement(groups[0]),\n  ea.getLargestElement(groups[1])\n];\n\nea.style.strokeColor = els[0].strokeColor;\nea.style.strokeWidth = els[0].strokeWidth;\nea.style.strokeStyle = els[0].strokeStyle;\nea.style.strokeSharpness = els[0].strokeSharpness;\nea.connectObjects(\n  els[0].id,\n  null,\n  els[1].id,\n  null, \n  &#123;\n    endArrowHead: arrowEnd,\n    startArrowHead: arrowStart, \n    numberOfPoints: linePoints\n  &#125;\n);\nea.addElementsToView(false,false,true);\n</code></pre>\n","text":"&#x2F;* This script will connect two objects with an arrow. If either of the objects are a set of grouped elements (e.g. a text element grou...","link":"","photos":[],"count_time":{"symbolsCount":"2.9k","symbolsTime":"3 mins."},"categories":[],"tags":[],"toc":"","author":{"name":"Devmacy","slug":"blog-author","avatar":"https://s1.ax1x.com/2023/01/24/pSYhwB4.jpg","link":"/","description":"数字花园","socials":{"github":"https://github.com/Devmacy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Convert freedraw to line","uid":"43401c5ad187ee18ee7b052dbabdf338","slug":"Convert freedraw to line","date":"2023-07-29T10:00:19.215Z","updated":"2023-07-29T10:00:19.343Z","comments":true,"path":"api/articles/Convert freedraw to line.json","keywords":"Digital Garden","cover":[],"text":"&#x2F;* Convert selected freedraw objects into editable lines. This will allow you to adjust your drawings by dragging line points and will ...","link":"","photos":[],"count_time":{"symbolsCount":"2.4k","symbolsTime":"2 mins."},"categories":[],"tags":[],"author":{"name":"Devmacy","slug":"blog-author","avatar":"https://s1.ax1x.com/2023/01/24/pSYhwB4.jpg","link":"/","description":"数字花园","socials":{"github":"https://github.com/Devmacy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Change shape of selected elements","uid":"61dc4c6fa14e45b1f3c1cc463dbd416d","slug":"Change shape of selected elements","date":"2023-07-29T10:00:19.211Z","updated":"2023-07-29T10:00:19.340Z","comments":true,"path":"api/articles/Change shape of selected elements.json","keywords":"Digital Garden","cover":[],"text":"&#x2F;* The script allows you to change the shape and fill style of selected Rectangles, Diamonds, Ellipses, Lines, Arrows and Freedraw. */ ...","link":"","photos":[],"count_time":{"symbolsCount":"2.5k","symbolsTime":"2 mins."},"categories":[],"tags":[],"author":{"name":"Devmacy","slug":"blog-author","avatar":"https://s1.ax1x.com/2023/01/24/pSYhwB4.jpg","link":"/","description":"数字花园","socials":{"github":"https://github.com/Devmacy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}